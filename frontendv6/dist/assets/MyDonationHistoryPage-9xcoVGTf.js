import{i as E,u as M,r as o,j as e,l as D,H as d,f as u,C as m,D as x,V as T,d as b,F as L}from"./index-1dtSQISR.js";import{S as y}from"./StatusBadge-D5kv7rFB.js";import{d as k}from"./donationService-DH00aI2W.js";import{f as g}from"./formatters-VVyg-bDD.js";import{H as f}from"./constants-QRcisZg4.js";import{A as h}from"./activity-CxJsYHTd.js";import{A as C}from"./award-ZM4KGVy7.js";import{C as j}from"./clock-BK2pyYK-.js";import{C as H}from"./chevron-right-B4c0w1B6.js";import"./Badge-DVxHSo1W.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],v=E("building-2",S),w=r=>{switch(r){case"COMPLETED":return{icon:d,color:"text-green-700",bg:"bg-green-100",badge:"bg-green-500 text-white",displayText:"Hoàn thành"};case"SCHEDULED":return{icon:m,color:"text-blue-700",bg:"bg-blue-100",badge:"bg-blue-500 text-white",displayText:"Đã lên lịch"};case"PENDING":return{icon:j,color:"text-yellow-700",bg:"bg-yellow-100",badge:"bg-yellow-500 text-white",displayText:"Chờ xử lý"};case"CANCELLED":return{icon:h,color:"text-red-700",bg:"bg-red-100",badge:"bg-red-500 text-white",displayText:"Đã hủy"};case"IN_PROGRESS":return{icon:h,color:"text-purple-700",bg:"bg-purple-100",badge:"bg-purple-500 text-white",displayText:"Đang thực hiện"};default:return{icon:j,color:"text-gray-700",bg:"bg-gray-100",badge:"bg-gray-500 text-white",displayText:"Chưa xác định"}}},A=({donationProcesses:r})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 uppercase tracking-wider",children:"Trạng thái & Nhóm máu"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 uppercase tracking-wider",children:"Thông tin hiến máu"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 uppercase tracking-wider",children:"Lịch hẹn"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 uppercase tracking-wider",children:"Kết quả"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 uppercase tracking-wider",children:"Ngày tạo"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(s=>{var l;const a=w(s.status),n=a.icon;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:["                    ",e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${a.bg}`,children:e.jsx(n,{className:`w-5 h-5 ${a.color}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl font-bold text-red-600",children:((l=s.donor)==null?void 0:l.bloodType)||"N/A"}),e.jsx(x,{className:"w-4 h-4 text-red-500 fill-current"})]}),e.jsx(y,{status:s.status})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"max-w-xs",children:[s.note&&e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mb-2",children:s.note}),s.collectedVolumeMl&&e.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[e.jsx(x,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{className:"font-semibold",children:[s.collectedVolumeMl,"ml"]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"space-y-1",children:s.appointment?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(m,{className:"w-4 h-4 text-blue-600 mr-2"}),e.jsx("span",{children:g(s.appointment.scheduledDate)})]}),"                            ",e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(v,{className:"w-4 h-4 text-green-600 mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:f.FULL_NAME})]}),s.appointment.address&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(b,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate text-xs",children:s.appointment.address})]})]}):e.jsx("span",{className:"text-sm text-gray-500",children:"Chưa có lịch hẹn"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"space-y-1",children:s.status==="COMPLETED"&&s.collectedVolumeMl?e.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Thành công"})]}):s.status==="CANCELLED"?e.jsxs("div",{className:"flex items-center text-sm text-red-600",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Đã hủy"})]}):e.jsx("span",{className:"text-sm text-gray-500",children:"-"})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx(m,{className:"w-4 h-4 inline mr-1"}),g(s.createdAt)]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["ID: ",s.id]})]})]},s.id)})})]})})}),e.jsx("div",{className:"lg:hidden space-y-4 p-4",children:r.map(s=>{var l;const a=w(s.status),n=a.icon;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:["              ",e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${a.bg}`,children:e.jsx(n,{className:`w-5 h-5 ${a.color}`})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg font-bold text-red-600",children:((l=s.donor)==null?void 0:l.bloodType)||"N/A"}),e.jsx(x,{className:"w-4 h-4 text-red-500 fill-current"})]})})]}),e.jsx(y,{status:s.status})]}),s.note&&e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(L,{className:"w-4 h-4 text-gray-500 mt-0.5"}),e.jsx("p",{className:"text-sm text-gray-700",children:s.note})]})}),s.appointment&&e.jsxs("div",{className:"mb-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:g(s.appointment.scheduledDate)})]}),"                  ",e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:f.FULL_NAME})]}),s.appointment.address&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:s.appointment.address})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",s.id," • ",g(s.createdAt)]}),s.collectedVolumeMl&&e.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[e.jsx(x,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{className:"font-semibold",children:[s.collectedVolumeMl,"ml"]})]})]})]},s.id)})})]}),$=()=>{const{user:r}=M(),[s,a]=o.useState([]),[n,l]=o.useState(!0),[N,p]=o.useState(null);o.useEffect(()=>{r&&(async()=>{try{l(!0),p(null);const c=await k.getMyDonationHistory();a(c.data||[])}catch(c){console.error("Error fetching donation history:",c),p("Không thể tải lịch sử hiến máu. Vui lòng thử lại."),T.error("Không thể tải lịch sử hiến máu")}finally{l(!1)}})()},[r]);const i={total:s.length,completed:s.filter(t=>t.status==="COMPLETED").length,scheduled:s.filter(t=>t.status==="SCHEDULED").length,pending:s.filter(t=>t.status==="PENDING").length,totalVolume:s.filter(t=>t.status==="COMPLETED"&&t.collectedVolumeMl).reduce((t,c)=>t+c.collectedVolumeMl,0)};return n?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(D,{size:"large"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Đang tải lịch sử hiến máu..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(d,{className:"w-8 h-8 text-red-500 mr-3 fill-current"}),"Lịch Sử Hiến Máu"]}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Theo dõi toàn bộ hành trình hiến máu của bạn"})]}),e.jsxs(u,{to:"/request-donation",className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center",children:[e.jsx(d,{className:"w-5 h-5 mr-2"}),"Đăng Ký Hiến Máu"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(h,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tổng số lần"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.total})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx(C,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Hoàn thành"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.completed})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(m,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Đã lên lịch"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.scheduled})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-yellow-100",children:e.jsx(j,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Chờ xử lý"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.pending})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-red-100",children:e.jsx(x,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tổng thể tích"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[i.totalVolume,"ml"]})]})]})})]}),N?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(h,{className:"w-16 h-16 mx-auto"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Có lỗi xảy ra"}),e.jsx("p",{className:"text-gray-600 mb-4",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors",children:"Thử lại"})]}):s.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(d,{className:"w-16 h-16 mx-auto"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Chưa có lịch sử hiến máu"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Bạn chưa có lần hiến máu nào. Hãy bắt đầu hành trình cứu người của bạn ngay hôm nay!"}),e.jsxs(u,{to:"/request-donation",className:"inline-flex items-center bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:[e.jsx(d,{className:"w-5 h-5 mr-2"}),"Đăng Ký Hiến Máu Ngay",e.jsx(H,{className:"w-5 h-5 ml-2"})]})]}):e.jsx(A,{donationProcesses:s})]})})};export{$ as default};
