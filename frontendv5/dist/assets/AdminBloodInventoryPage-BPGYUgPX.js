import{g as v,s as y,r as c,V as p,j as e,d as S,B as E,R as A,D as b}from"./index---XYpbwv.js";import{C as f}from"./clock-DJtAe62-.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],k=v("trending-down",I);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],w=v("trending-up",R),u={getAllInventory:()=>y.get("/inventory").then(s=>s.data),getInventorySummary:()=>y.get("/inventory/summary").then(s=>s.data),getRecentAdditions:()=>y.get("/inventory/recent").then(s=>s.data)},N=({item:s})=>{var o;const d=l=>{switch(l){case"AVAILABLE":return"bg-green-100 text-green-800 border-green-200";case"EXPIRED":return"bg-red-100 text-red-800 border-red-200";case"USED":return"bg-gray-100 text-gray-800 border-gray-200";case"RESERVED":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},a=l=>new Date(l).toLocaleDateString("vi-VN"),r=l=>{const i=new Date,m=new Date(l)-i,x=Math.ceil(m/(1e3*60*60*24));return x<=7&&x>0};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"w-8 h-8 text-red-500 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((o=s.bloodType)==null?void 0:o.name)||"N/A"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Đơn vị: ",s.unitId]})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${d(s.status)}`,children:s.status==="AVAILABLE"?"Có sẵn":s.status==="EXPIRED"?"Hết hạn":s.status==="USED"?"Đã sử dụng":s.status==="RESERVED"?"Đã đặt chỗ":s.status})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ngày thu thập:"}),e.jsx("span",{className:"font-medium",children:a(s.collectionDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ngày hết hạn:"}),e.jsxs("span",{className:`font-medium ${r(s.expiryDate)?"text-red-600":""}`,children:[a(s.expiryDate),r(s.expiryDate)&&e.jsx("span",{className:"ml-1 text-xs",children:"(Sắp hết hạn)"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Dung tích:"}),e.jsxs("span",{className:"font-medium",children:[s.volume||450,"ml"]})]}),s.location&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vị trí:"}),e.jsx("span",{className:"font-medium",children:s.location})]})]})]})},C=({summary:s})=>{var a;const d=r=>r>0?e.jsx(w,{className:"w-5 h-5 text-green-500"}):r<0?e.jsx(k,{className:"w-5 h-5 text-red-500"}):e.jsx(f,{className:"w-5 h-5 text-gray-500"});return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((a=s.bloodType)==null?void 0:a.name)||"N/A"}),d(s.trend)]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Tổng số đơn vị:"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:s.totalUnits})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Có sẵn:"}),e.jsx("span",{className:"text-lg font-semibold text-green-600",children:s.availableUnits})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Sắp hết hạn:"}),e.jsx("span",{className:"text-lg font-semibold text-yellow-600",children:s.expiringSoon||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Đã hết hạn:"}),e.jsx("span",{className:"text-lg font-semibold text-red-600",children:s.expiredUnits||0})]})]})]})},V=()=>{const[s,d]=c.useState([]),[a,r]=c.useState([]),[o,l]=c.useState([]),[i,j]=c.useState("summary"),[m,x]=c.useState(!0),h=c.useCallback(async()=>{x(!0);try{const[t,n,g]=await Promise.all([u.getAllInventory(),u.getInventorySummary(),u.getRecentAdditions()]);d(t),r(n),l(g)}catch{p.error("Không thể tải dữ liệu kho máu.")}finally{x(!1)}},[]);c.useEffect(()=>{h()},[h]);const D=()=>{h(),p.success("Đã cập nhật dữ liệu!")};return m?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(S,{size:"12"})})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quản lý Kho Máu"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Theo dõi và quản lý tồn kho máu"})]}),e.jsxs(E,{onClick:D,variant:"outline",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Làm mới"]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"summary",label:"Tổng quan",icon:w},{key:"inventory",label:"Kho máu",icon:b},{key:"recent",label:"Mới nhất",icon:f}].map(({key:t,label:n,icon:g})=>e.jsxs("button",{onClick:()=>j(t),className:`flex items-center py-3 px-1 border-b-2 font-medium text-sm ${i===t?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),n]},t))})}),i==="summary"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Tóm tắt tồn kho theo nhóm máu"}),a.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map((t,n)=>e.jsx(C,{summary:t},n))}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Không có dữ liệu tóm tắt"})})]}),i==="inventory"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Danh sách đơn vị máu"}),s.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((t,n)=>e.jsx(N,{item:t},n))}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Không có đơn vị máu nào trong kho"})})]}),i==="recent"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Đơn vị máu mới thêm gần đây"}),o.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map((t,n)=>e.jsx(N,{item:t},n))}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Không có đơn vị máu mới nào gần đây"})})]})]})};export{V as default};
