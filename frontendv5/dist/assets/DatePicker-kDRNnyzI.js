import{r,j as t,C as B}from"./index-265Lkhjq.js";import{C as M,a as G}from"./chevron-right-CdXhp0uB.js";const U=({label:p,value:l,onChange:w,required:J=!1,disabled:j=!1,minDate:D=null,maxDate:N=null,className:Y="",placeholder:E="Chọn ngày",...v})=>{const[o,b]=r.useState(""),[c,u]=r.useState(new Date),[i,d]=r.useState(!1),[f,h]=r.useState(!1),[g,m]=r.useState(!1);r.useEffect(()=>{l&&(b(l),u(new Date(l)))},[l]),r.useEffect(()=>{const e=s=>{i&&!s.target.closest(".date-picker-container")&&(d(!1),h(!1),m(!1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[i]),r.useEffect(()=>{o!==l&&w&&w({target:{value:o,name:v.name}})},[o,l,v.name]);const $=()=>{const e=c.getFullYear(),s=c.getMonth(),n=new Date(e,s,1),x=new Date(n);x.setDate(x.getDate()-n.getDay());const k=[],S=new Date;S.setHours(0,0,0,0);for(let y=0;y<42;y++){const a=new Date(x);a.setDate(x.getDate()+y);const O=a.getMonth()===s,V=a.getTime()===S.getTime(),z=o===a.toISOString().split("T")[0],H=D&&a<new Date(D),X=N&&a>new Date(N),A=H||X;k.push({date:a,day:a.getDate(),isCurrentMonth:O,isToday:V,isSelected:z,isDisabled:A})}return k},F=e=>{if(e.isDisabled)return;const s=e.date.toISOString().split("T")[0];b(s),d(!1)},T=e=>{u(s=>{const n=new Date(s);return n.setMonth(s.getMonth()+e),n})},P=e=>{u(s=>{const n=new Date(s);return n.setMonth(e),n}),h(!1)},R=e=>{u(s=>{const n=new Date(s);return n.setFullYear(e),n}),m(!1)},L=()=>{const e=new Date().getFullYear(),s=[];for(let n=e-100;n<=e+10;n++)s.push(n);return s};r.useEffect(()=>{g&&setTimeout(()=>{const e=document.querySelector(".current-year-button");e&&e.scrollIntoView({behavior:"smooth",block:"center"})},100)},[g]);const q=()=>o?new Date(o).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric"}):E,C=["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],I=["CN","T2","T3","T4","T5","T6","T7"];return t.jsxs("div",{className:`space-y-2 ${Y}`,children:["      ",p&&t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:p}),t.jsxs("div",{className:"relative date-picker-container",children:[t.jsxs("button",{type:"button",onClick:()=>!j&&d(!i),disabled:j,className:"w-full flex items-center justify-between px-4 py-3 border border-gray-300 rounded-lg bg-white text-left focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(B,{className:"w-5 h-5 text-gray-400 mr-3"}),t.jsx("span",{className:o?"text-gray-900":"text-gray-500",children:q()})]}),t.jsx(M,{className:`w-5 h-5 text-gray-400 transform transition-transform ${i?"rotate-90":""}`})]}),i&&t.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-4 w-80",children:["            ",t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("button",{type:"button",onClick:()=>T(-1),className:"p-2 hover:bg-gray-100 rounded-lg",children:t.jsx(G,{className:"w-5 h-5"})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{type:"button",onClick:()=>{h(!f),m(!1)},className:"px-3 py-1 text-sm font-semibold text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:C[c.getMonth()]}),t.jsx("button",{type:"button",onClick:()=>{m(!g),h(!1)},className:"px-3 py-1 text-sm font-semibold text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:c.getFullYear()})]}),t.jsx("button",{type:"button",onClick:()=>T(1),className:"p-2 hover:bg-gray-100 rounded-lg",children:t.jsx(M,{className:"w-5 h-5"})}),"            "]}),f&&t.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:C.map((e,s)=>t.jsx("button",{type:"button",onClick:()=>P(s),className:`px-3 py-2 text-sm rounded-lg transition-colors ${c.getMonth()===s?"bg-red-500 text-white font-semibold":"hover:bg-gray-100 text-gray-700"}`,children:e},e))}),g&&t.jsx("div",{className:"max-h-60 overflow-y-auto mb-4",children:t.jsxs("div",{className:"grid grid-cols-4 gap-2",children:["                  ",L().map(e=>t.jsx("button",{type:"button",onClick:()=>R(e),className:`px-3 py-2 text-sm rounded-lg transition-colors ${c.getFullYear()===e?"bg-red-500 text-white font-semibold current-year-button":"hover:bg-gray-100 text-gray-700"}`,children:e},e))]})}),!f&&!g&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:I.map(e=>t.jsx("div",{className:"text-center text-xs font-medium text-gray-500 py-2",children:e},e))}),t.jsx("div",{className:"grid grid-cols-7 gap-1",children:$().map((e,s)=>t.jsx("button",{type:"button",onClick:()=>F(e),disabled:e.isDisabled,className:`
                        aspect-square flex items-center justify-center text-sm rounded-lg transition-colors
                        ${e.isCurrentMonth?"":"text-gray-300"}
                        ${e.isToday?"bg-blue-100 text-blue-600 font-semibold":""}
                        ${e.isSelected?"bg-red-500 text-white font-semibold":""}
                        ${e.isDisabled?"cursor-not-allowed opacity-50":"hover:bg-gray-100"}
                        ${!e.isSelected&&!e.isToday&&e.isCurrentMonth?"text-gray-900":""}
                      `,children:e.day},s))})]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex justify-between",children:[t.jsx("button",{type:"button",onClick:()=>{b(""),d(!1)},className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Xóa"}),t.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Đóng"})]})]})]})]})};export{U as D};
