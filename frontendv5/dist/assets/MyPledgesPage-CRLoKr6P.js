import{r as i,u as o,j as e,f as m,l as h,H as l,V as g,d as u,C as j,P as y,M as N}from"./index-CLUoxoAg.js";import{S as p}from"./StatusBadge-DgoAfm03.js";import{b}from"./bloodRequestService-C7vK5jM6.js";import"./Badge-CK4vI7BX.js";import"./constants-CyaO7I1E.js";const f=({pledge:a})=>{const n=t=>new Date(t).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),c=t=>{switch(t){case"EMERGENCY":return"border-red-500 bg-red-50";case"URGENT":return"border-orange-500 bg-orange-50";case"NORMAL":return"border-blue-500 bg-blue-50";default:return"border-gray-300 bg-gray-50"}},s=a.bloodRequest;return e.jsxs("div",{className:`bg-white rounded-lg shadow-md border-l-4 ${c(s.priority)} p-6 hover:shadow-lg transition-shadow`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{className:"w-6 h-6 text-red-500 mr-3 fill-current"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Nhóm máu: ",s.bloodTypeRequired]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Đăng ký lúc: ",n(a.createdAt)]})]})]}),e.jsx(p,{status:a.status||"PENDING"})]}),s.description&&e.jsx("p",{className:"text-gray-700 mb-4",children:s.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[s.quantityNeeded&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Số lượng cần:"}),e.jsxs("span",{className:"ml-2",children:[s.quantityNeeded," đơn vị"]})]}),s.location&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:s.location})]}),s.neededBy&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:["Cần trước: ",n(s.neededBy)]})]})]}),(s.contactPhone||s.contactEmail)&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Thông tin liên hệ:"}),e.jsxs("div",{className:"space-y-1",children:[s.contactPhone&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),e.jsx("a",{href:`tel:${s.contactPhone}`,className:"text-blue-600 hover:underline",children:s.contactPhone})]}),s.contactEmail&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),e.jsx("a",{href:`mailto:${s.contactEmail}`,className:"text-blue-600 hover:underline",children:s.contactEmail})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[e.jsxs("span",{children:["ID: ",a.id]}),e.jsxs("span",{children:["Yêu cầu: #",s.id]})]})]})},M=()=>{const[a,n]=i.useState([]),[c,s]=i.useState(!0),{user:t}=o();return i.useEffect(()=>{const r=async()=>{s(!0);try{const x=(await b.getUserPledges()).data||[];n(x)}catch(d){console.error("Error fetching user pledges:",d),g.error("Không thể tải danh sách đăng ký hiến máu của bạn."),n([])}finally{s(!1)}};t!=null&&t.id&&r()},[t==null?void 0:t.id]),t?e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Đăng Ký Hiến Máu Của Tôi"}),e.jsx("p",{className:"text-gray-600",children:"Quản lý các yêu cầu hiến máu mà bạn đã đăng ký."})]}),c?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(h,{size:"12"})}):a.length>0?e.jsx("div",{className:"space-y-6",children:a.map(r=>e.jsx(f,{pledge:r},r.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(l,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Chưa có đăng ký nào"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Bạn chưa đăng ký hiến máu cho yêu cầu nào. Hãy tham gia cứu người ngay hôm nay!"}),e.jsxs(m,{to:"/blood-requests",className:"inline-flex items-center bg-red-600 text-white px-6 py-3 rounded-md hover:bg-red-700 transition-colors",children:[e.jsx(l,{className:"w-5 h-5 mr-2"}),"Xem Yêu Cầu Hiến Máu"]})]})]}):e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Vui lòng đăng nhập"}),e.jsx("p",{className:"text-gray-600",children:"Bạn cần đăng nhập để xem danh sách đăng ký hiến máu của mình."}),e.jsx(m,{to:"/login",className:"mt-4 inline-block bg-red-600 text-white px-6 py-2 rounded-md hover:bg-red-700",children:"Đăng nhập"})]})})};export{M as default};
