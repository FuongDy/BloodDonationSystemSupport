import{i as B,r as c,j as e,C as S,b as J,u as W,H as q,o as X,d as Z,B as ee,V as C}from"./index-CLUoxoAg.js";import{I as se}from"./InputField-CdPCaxRY.js";import{C as D,a as te}from"./chevron-right-Dplm1_a-.js";import{C as L}from"./clock-DHp9DAYO.js";import{d as ae}from"./donationService-D-AAkThF.js";import{u as ne}from"./useAuthRedirect-D3HqaErI.js";import{C as p}from"./circle-check-big-DeP-VlS6.js";import{I}from"./info-DX-1apdy.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],le=B("message-square",re);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ce=B("send",ie),de=({label:d,value:o,onChange:l,required:f=!1,disabled:b=!1,minDate:j=null,maxDate:N=null,className:g="",...w})=>{const[t,u]=c.useState(""),[a,m]=c.useState(""),[h,P]=c.useState(new Date),[y,v]=c.useState(!1);c.useEffect(()=>{if(o){const s=new Date(o);isNaN(s.getTime())||(u(s.toISOString().split("T")[0]),m(s.toTimeString().slice(0,5)))}},[o]),c.useEffect(()=>{if(t&&a&&l){const s=`${t}T${a}`;s!==o&&l({target:{value:s,name:w.name}})}},[t,a,o,w.name]);const R=()=>{const s=h.getFullYear(),n=h.getMonth(),r=new Date(s,n,1),x=new Date(r);x.setDate(x.getDate()-r.getDay());const H=[],k=new Date;k.setHours(0,0,0,0);for(let T=0;T<42;T++){const i=new Date(x);i.setDate(x.getDate()+T);const E=i.getMonth()===n,F=i.getTime()===k.getTime(),G=t===i.toISOString().split("T")[0],O=i<k,Y=j&&i<new Date(j),_=N&&i>new Date(N),U=O||Y||_;H.push({date:i,day:i.getDate(),isCurrentMonth:E,isToday:F,isSelected:G,isDisabled:U})}return H},V=()=>{const s=[];for(let n=7;n<=16;n++)for(let r=0;r<60&&!(n===16&&r>30);r+=30){const x=`${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`;s.push(x)}return s},z=s=>{s.isDisabled||(u(s.date.toISOString().split("T")[0]),v(!1))},M=s=>{P(n=>{const r=new Date(n);return r.setMonth(n.getMonth()+s),r})},$=()=>t?new Date(t).toLocaleDateString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Chọn ngày",A=()=>a||"Chọn giờ",K=["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],Q=["CN","T2","T3","T4","T5","T6","T7"];return e.jsxs("div",{className:`space-y-2 ${g}`,children:[d&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[d," ",f&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>v(!y),disabled:b,className:"w-full flex items-center justify-between px-4 py-3 border border-gray-300 rounded-lg bg-white text-left focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"w-5 h-5 text-gray-400 mr-3"}),e.jsx("span",{className:t?"text-gray-900":"text-gray-500",children:$()})]}),e.jsx(D,{className:`w-5 h-5 text-gray-400 transform transition-transform ${y?"rotate-90":""}`})]}),y&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-4 w-80",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{type:"button",onClick:()=>M(-1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(te,{className:"w-5 h-5"})}),e.jsxs("h3",{className:"font-semibold text-gray-900",children:[K[h.getMonth()]," ",h.getFullYear()]}),e.jsx("button",{type:"button",onClick:()=>M(1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(D,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Q.map(s=>e.jsx("div",{className:"text-center text-xs font-medium text-gray-500 py-2",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:R().map((s,n)=>e.jsx("button",{type:"button",onClick:()=>z(s),disabled:s.isDisabled,className:`
                      aspect-square flex items-center justify-center text-sm rounded-lg transition-colors
                      ${s.isCurrentMonth?"":"text-gray-300"}
                      ${s.isToday?"bg-blue-100 text-blue-600 font-semibold":""}
                      ${s.isSelected?"bg-red-500 text-white font-semibold":""}
                      ${s.isDisabled?"cursor-not-allowed opacity-50":"hover:bg-gray-100"}
                      ${!s.isSelected&&!s.isToday&&s.isCurrentMonth?"text-gray-900":""}
                    `,children:s.day},n))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("button",{type:"button",onClick:()=>v(!1),className:"w-full px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Đóng"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:a,onChange:s=>m(s.target.value),disabled:b,className:"w-full appearance-none px-4 py-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"Chọn giờ"}),V().map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(L,{className:"w-5 h-5 text-gray-400"})}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx(D,{className:"w-5 h-5 text-gray-400 rotate-90"})})]})]}),t&&a&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("span",{className:"font-medium",children:"Lịch hẹn đã chọn:"})," ",$()," lúc ",A()]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"* Thời gian làm việc: 7:30 - 16:30 (Thứ 2 - Chủ nhật)"})]})},be=()=>{const[d,o]=c.useState({appointmentDate:"",location:"Trung tâm hiến máu TP.HCM (201 Nguyễn Thị Minh Khai, Q1)",notes:""}),[l,f]=c.useState(!1),b=J(),{isAuthenticated:j}=W(),{requireAuth:N}=ne(),g=c.useCallback(t=>{const{name:u,value:a}=t.target;o(m=>({...m,[u]:a}))},[]),w=async t=>{var a,m;if(t.preventDefault(),!!N(null,"Vui lòng đăng nhập để đặt lịch hẹn hiến máu.")){if(!d.appointmentDate||!d.location){C.error("Vui lòng chọn ngày hẹn và địa điểm.");return}f(!0);try{await ae.createDonationRequest(),C.success("Yêu cầu hiến máu đã được gửi thành công! Chúng tôi sẽ sớm liên hệ với bạn."),b("/profile")}catch(h){C.error(((m=(a=h.response)==null?void 0:a.data)==null?void 0:m.message)||"Gửi yêu cầu thất bại.")}finally{f(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-pink-50 overflow-x-hidden",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-red-600 to-pink-600 text-white",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"relative container mx-auto px-4 py-12 sm:py-16",children:e.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/20 rounded-full backdrop-blur-sm mb-6",children:e.jsx(q,{className:"h-10 w-10 text-white"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold mb-4 break-words",children:"Đặt Lịch Hẹn Hiến Máu"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl text-red-100 mb-8 font-light break-words",children:"Mỗi giọt máu bạn hiến tặng là một cơ hội cứu sống một người"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 sm:gap-6 lg:gap-8 text-red-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[e.jsx(L,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:"Nhanh chóng"})]}),e.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[e.jsx(X,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:"An toàn"})]}),e.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[e.jsx(p,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:"Tin cậy"})]})]})]})})]}),e.jsx("div",{className:"container mx-auto px-4 py-12 overflow-x-hidden",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 lg:gap-8",children:[e.jsxs("div",{className:"xl:col-span-1 space-y-6 order-2 xl:order-1",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(I,{className:"h-5 w-5 text-blue-600 mr-2"}),"Quy trình hiến máu"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center text-xs font-semibold text-red-600",children:"1"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:"Đặt lịch hẹn"}),e.jsx("p",{className:"text-xs text-gray-600 break-words",children:"Chọn thời gian phù hợp"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center text-xs font-semibold text-red-600",children:"2"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:"Khám sàng lọc"}),e.jsx("p",{className:"text-xs text-gray-600 break-words",children:"Kiểm tra sức khỏe"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center text-xs font-semibold text-red-600",children:"3"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:"Hiến máu"}),e.jsx("p",{className:"text-xs text-gray-600 break-words",children:"Chỉ mất 10-15 phút"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center text-xs font-semibold text-red-600",children:"4"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:"Nghỉ ngơi"}),e.jsx("p",{className:"text-xs text-gray-600 break-words",children:"Thưởng thức đồ ăn nhẹ"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(q,{className:"h-5 w-5 text-green-600 mr-2"}),"Lợi ích khi hiến máu"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(p,{className:"h-4 w-4 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"break-words",children:"Kiểm tra sức khỏe miễn phí"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(p,{className:"h-4 w-4 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"break-words",children:"Cải thiện tuần hoàn máu"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(p,{className:"h-4 w-4 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"break-words",children:"Giảm nguy cơ bệnh tim mạch"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(p,{className:"h-4 w-4 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"break-words",children:"Cảm giác hạnh phúc và ý nghĩa"})]})]})]})]}),e.jsx("div",{className:"xl:col-span-2 order-1 xl:order-2",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 sm:p-8 border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4",children:e.jsx(S,{className:"h-8 w-8 text-red-600"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Thông tin đặt lịch"}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base break-words",children:"Vui lòng điền đầy đủ thông tin để chúng tôi có thể hỗ trợ bạn tốt nhất"})]}),!j&&e.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(I,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Cần đăng nhập để đặt lịch"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Bạn có thể xem thông tin và quy trình hiến máu. Để đặt lịch hẹn, vui lòng đăng nhập hoặc đăng ký tài khoản."})]})]})}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(S,{className:"h-5 w-5 text-red-600 mr-2"}),"Chọn thời gian"]}),e.jsx(de,{label:"Ngày và giờ hẹn",name:"appointmentDate",value:d.appointmentDate,onChange:g,required:!0,disabled:l,minDate:new Date().toISOString().split("T")[0],className:"bg-white"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Z,{className:"h-5 w-5 text-blue-600 mr-2"}),"Địa điểm"]}),e.jsx(se,{label:"Chọn địa điểm hiến máu",id:"location",name:"location",type:"text",value:d.location,onChange:g,required:!0,disabled:l,className:"bg-white"}),e.jsxs("div",{className:"mt-3 text-xs text-gray-600",children:[e.jsx("p",{className:"font-medium mb-1",children:"Các địa điểm phổ biến:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{className:"break-words",children:"• Trung tâm hiến máu TP.HCM (201 Nguyễn Thị Minh Khai, Q1)"}),e.jsx("li",{className:"break-words",children:"• Bệnh viện Chợ Rẫy (201B Nguyễn Chí Thanh, Q5)"}),e.jsx("li",{className:"break-words",children:"• Bệnh viện Đại học Y Dược (215 Hồng Bàng, Q5)"})]})]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(le,{className:"h-5 w-5 text-purple-600 mr-2"}),"Ghi chú thêm"]}),e.jsx("div",{className:"relative",children:e.jsx("textarea",{id:"notes",name:"notes",rows:"4",value:d.notes,onChange:g,disabled:l,className:"block w-full px-4 py-3 border border-gray-200 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 bg-white resize-none",placeholder:"Ví dụ: Tôi có thể đến sau 18:00, có tiền sử bệnh tim, cần tư vấn thêm..."})}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Hãy cho chúng tôi biết bất kỳ thông tin nào có thể hữu ích"})]}),e.jsxs("div",{className:"pt-6",children:[e.jsxs(ee,{type:"submit",className:"w-full bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white font-semibold py-3 sm:py-4 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 text-sm sm:text-base",disabled:l,isLoading:l,size:"lg",children:[e.jsx(ce,{className:"mr-2 sm:mr-3 h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:l?"Đang gửi yêu cầu...":"Gửi yêu cầu hiến máu"})]}),e.jsx("p",{className:"mt-3 text-center text-xs text-gray-500 break-words px-2",children:"Chúng tôi sẽ liên hệ với bạn trong vòng 24 giờ để xác nhận lịch hẹn"})]})]})]})})]})})})]})};export{be as default};
