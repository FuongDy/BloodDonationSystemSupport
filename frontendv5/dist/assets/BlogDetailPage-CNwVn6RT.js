import{p as y,b,u as v,r,j as e,d as w,L as c,U as D,B as o,V as m}from"./index---XYpbwv.js";import{b as h}from"./blogPostService-BW_bxcWH.js";import{A as P}from"./arrow-left-CYlgApu7.js";import{C as A}from"./clock-DJtAe62-.js";import{S as L}from"./square-pen-B_DZs_bD.js";import{T as S}from"./trash-2-2oCXCowO.js";const T=()=>{const{id:i}=y(),l=b(),{user:n}=v(),[s,u]=r.useState(null),[g,p]=r.useState(!0),[d,x]=r.useState(!1);r.useEffect(()=>{i&&(async()=>{try{const a=await h.getPostById(i);u(a)}catch{m.error("Không thể tải bài viết."),l("/blog")}finally{p(!1)}})()},[i,l]);const f=async()=>{if(window.confirm("Bạn có chắc chắn muốn xóa bài viết này?")){x(!0);try{await h.deletePost(i),m.success("Xóa bài viết thành công!"),l("/blog")}catch{m.error("Không thể xóa bài viết.")}finally{x(!1)}}},j=t=>new Date(t).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),N=n&&(n.id===(s==null?void 0:s.authorId)||n.role==="Admin");return g?e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(w,{size:"12"})})}):s?e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(c,{to:"/blog",className:"inline-flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Quay lại danh sách bài viết"]})}),e.jsxs("article",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.imageUrl&&e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-64 md:h-96 object-cover"}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center text-gray-500 text-sm",children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"mr-4",children:s.authorName}),e.jsx(A,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:j(s.createdAt)}),s.updatedAt&&s.updatedAt!==s.createdAt&&e.jsx("span",{className:"ml-2 text-xs",children:"(Đã chỉnh sửa)"})]}),N&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(c,{to:`/blog/${i}/edit`,children:e.jsxs(o,{variant:"outline",size:"sm",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Chỉnh sửa"]})}),e.jsxs(o,{variant:"danger-outline",size:"sm",onClick:f,disabled:d,isLoading:d,children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Xóa"]})]})]}),s.status&&s.status!=="PUBLISHED"&&e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${s.status==="DRAFT"?"bg-gray-100 text-gray-800":s.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status==="DRAFT"?"Bản nháp":s.status==="PENDING"?"Chờ duyệt":"Đã từ chối"})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-6",children:s.title}),e.jsx("div",{className:"prose prose-lg max-w-none",children:s.content.split(`
`).map((t,a)=>t.trim()&&e.jsx("p",{className:"mb-4 text-gray-700 leading-relaxed",children:t},a))}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((t,a)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-red-100 text-red-800",children:["#",t]},a))})})]})]})]}):e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-700",children:"Không tìm thấy bài viết"}),e.jsx(c,{to:"/blog",className:"text-red-600 hover:text-red-700 mt-4 inline-block",children:"← Quay lại danh sách bài viết"})]})})};export{T as default};
