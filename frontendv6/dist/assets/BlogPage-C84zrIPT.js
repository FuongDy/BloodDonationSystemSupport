import{r as n,u as b,V as v,j as e,f as c,B as g,l as N,U as y,e as p}from"./index-0uBgUJAH.js";import{b as w}from"./blogPostService-DO3cpwxp.js";import{B as P}from"./constants-QRcisZg4.js";import{P as C}from"./Pagination-CR7EbBZ1.js";import{C as u}from"./circle-plus-Dml-AeJc.js";import{C as S}from"./clock-DvSylXuB.js";import"./chevron-left-xbWY0yrx.js";import"./chevron-right-C8WomcHX.js";const B=({post:t})=>{const i=s=>new Date(s).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric"}),r=(s,l=150)=>s.length<=l?s:`${s.substring(0,l)}...`;return e.jsxs("article",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[t.imageUrl&&e.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"mr-4",children:t.authorName}),e.jsx(S,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:i(t.createdAt)})]}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-3 hover:text-red-600 transition-colors",children:e.jsx(c,{to:`/blog/${t.id}`,children:t.title})}),e.jsx("p",{className:"text-gray-600 mb-4",children:r(t.content)}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(c,{to:`/blog/${t.id}`,className:"text-red-600 hover:text-red-700 font-medium",children:"Đọc thêm →"}),t.viewCount&&e.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[e.jsx(p,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[t.viewCount," lượt xem"]})]})]})]})]})},$=()=>{const[t,i]=n.useState({content:[],totalElements:0,totalPages:0}),[r,s]=n.useState(0),[l,x]=n.useState(!0),{user:o,isAuthenticated:j}=b(),m=j&&P.canCreateBlog(o==null?void 0:o.role),d=n.useCallback(async(a=0)=>{x(!0);try{const h=await w.getAllPublishedPosts(a,9);i(h)}catch{v.error("Không thể tải danh sách bài viết."),i({content:[],totalElements:0,totalPages:0})}finally{x(!1)}},[]);n.useEffect(()=>{d(r)},[r,d]);const f=a=>{s(a),window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Blog Hiến Máu"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Chia sẻ kiến thức, kinh nghiệm và câu chuyện về hoạt động hiến máu tình nguyện"})]}),m&&e.jsx("div",{className:"flex justify-end mb-8",children:e.jsx(c,{to:"/blog/create",children:e.jsxs(g,{variant:"primary",children:[e.jsx(u,{className:"w-5 h-5 mr-2"}),"Viết bài mới"]})})}),l?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(N,{size:"12"})}):t.content.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:t.content.map(a=>e.jsx(B,{post:a},a.id))}),t.totalPages>1&&e.jsx("div",{className:"flex justify-center",children:e.jsx(C,{currentPage:r,totalPages:t.totalPages,onPageChange:f})})]}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Chưa có bài viết nào"}),e.jsx("p",{className:"text-gray-500 mb-4",children:m?"Hãy là người đầu tiên chia sẻ câu chuyện của bạn!":"Các bài viết sẽ được chia sẻ bởi Admin và Staff."}),m&&e.jsx(c,{to:"/blog/create",children:e.jsxs(g,{variant:"primary",children:[e.jsx(u,{className:"w-5 h-5 mr-2"}),"Viết bài đầu tiên"]})})]})]})};export{$ as default};
